import { FontAwesomeVersion } from '../types'

function isFontAwesomeEnabled(version: FontAwesomeVersion): boolean {
    const prefix = version === 4 ? 'fa' : 'fas'
    const fontNames = version === 4
        ? ['FontAwesome', '"FontAwesome"']
        : ['"Font Awesome 5 Free"', '"Font Awesome 5 Pro"']

    let isLoaded = false
    const span = document.createElement('span')

    span.className = prefix
    span.style.display = 'none'
    document.body.insertBefore(span, document.body.firstChild)

    const css = (element: Element, property: string) => window.getComputedStyle(element, null).getPropertyValue(property)

    if (!fontNames.includes(css(span, 'font-family'))) {
        console.warn(
            `Font Awesome ${version} was not detected but Font Awesome ${version} icons have been requested for \`react-object-list\``
        )
    } else {
        isLoaded = true
    }

    document.body.removeChild(span)

    return isLoaded
}

export { isFontAwesomeEnabled }
